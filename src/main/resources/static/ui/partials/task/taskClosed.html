<form dir="rtl" name="form" ng-submit="submit()" novalidate="novalidate" focus-group="" focus-stack=""
      focus-group-head="loop" focus-group-tail="loop">

    <div class="modal-header">
        <h3 class="modal-title text-center" id="modal-title">إغلاق المهمة على موظف</h3>
    </div>

    <div class="modal-body" id="modal-body">

        <div class="row">

            <div class="form-group text-right col-md-12" ng-show="form.$invalid && form.$submitted">
                <div class="alert alert-danger" role="alert">
                    <strong>فضلاً اكمل الحقول المطلوبة</strong>
                </div>
            </div>

            <div class="form-group text-right col-md-12">
                <div class="panel panel-success">
                    <div class="panel-heading">
                        <div class="panel-title-box pull-right">
                            <h3>البيانات الاساسية</h3>
                        </div>
                    </div>
                    <div class="panel-body panel-body-table">
                        <table class="table table-bordered">
                            <tbody>
                            <tr>
                                <td>رقم المهمة</td>
                                <td>{{task.code}}</td>
                            </tr>
                            <tr>
                                <td>عنوان المهمة</td>
                                <td>{{task.title}}</td>
                            </tr>
                            <tr>
                                <td>تفاصيل المهمة</td>
                                <td>{{task.content}}</td>
                            </tr>
                            <tr>
                                <td>الحد الأقصى للتحذيرات</td>
                                <td>{{task.warn}}</td>
                            </tr>
                            <tr>
                                <td class="fit">مقدار الحسم عند الوصول للحد الاقصي للتحذيرات</td>
                                <td>{{task.deduction}} ريال سعودي</td>
                            </tr>
                            <tr>
                                <td>مقدار الحسم عند إغلاق المهمة تلقائياً</td>
                                <td>{{task.deductionOnAutoClose}} ريال سعودي</td>
                            </tr>
                            <tr>
                                <td>تاريخ الإنشاء</td>
                                <td>{{task.startDate | kdate: 'yyyy-mm-dd' : 'ar' : 'ummalqura'}}
                                </td>
                            </tr>
                            <tr>
                                <td>تاريخ التسليم</td>
                                <td>{{task.endDate | kdate: 'yyyy-mm-dd' : 'ar' : 'ummalqura'}}
                                </td>
                            </tr>
                            <tr>
                                <td>جهة التكليف</td>
                                <td>{{task.person.nickname}} / {{task.person.name}}</td>
                            </tr>
                            <tr>
                                <td>الموظفون</td>
                                <td>
                                    <span class="label label-info"
                                          ng-repeat="to in task.taskTos"
                                          style="margin: 2px">{{to.person.name}}</span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="form-group text-right col-md-12">
                <div class="alert alert-info" role="alert">
                    <strong>عند إغلاق المهمة على موظف من المكلفين لن يكون بإمكانه اضافة حركات او تعليقات على
                        المهمة مرة اخرى، بالاضافة الى انه لن تصله رسائل تحذير او خصومات بشأن المهمة، ولكن
                        بامكانه متابعة المهمة حتى وقت إغلاقها المحدد من قبل جهة التكليف.</strong>
                </div>
            </div>

            <div class="form-group text-right col-md-12">
                <div class="panel panel-success">
                    <div class="panel-heading">
                        <div class="panel-title-box pull-right">
                            <h3>البيانات المطلوبة</h3>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="form-group text-right col-md-12">
                            <label for="taskTos" class="control-label">الموظف</label>
                            <select id="taskTos"
                                    data-placeholder="ابحث عن الاسم"
                                    no-results-text="'لا توجد بيانات توافق بحثك'"
                                    placeholder-text-single="'اختر الموظف'"
                                    class="form-control text-right"
                                    chosen=""
                                    required="required"
                                    disable-validation-message=""
                                    ng-model="buffer.taskTo"
                                    focus-index="1"
                                    ng-options="taskTo.person.name for taskTo in task.taskTos track by taskTo.id">
                            </select>
                        </div>

                        <div class="form-group text-right col-md-12">
                            <div dir="ltr">
                                <toggle-switch
                                        style="width: 100%"
                                        ng-model="buffer.taskTo.closed"
                                        class="switch-danger"
                                        on-label="مغلقة"
                                        off-label="مفتوحة">
                                </toggle-switch>
                            </div>
                        </div>

                        <div class="form-group text-right col-md-12">
                            <label for="importance" class="control-label">
                                <span>تقييم الآداء</span>
                            </label>
                            <select id="importance"
                                    placeholder="اختر درجة التقييم للمساعدة فى التصنيف"
                                    class="form-control text-right"
                                    ng-model="buffer.taskTo.degree"
                                    focus-index="2">
                                <option value="A">ممتاز</option>
                                <option value="B">جيد جداً</option>
                                <option value="C">جيد</option>
                                <option value="D">مقبول</option>
                                <option value="F">سيئ</option>
                            </select>
                        </div>

                    </div>
                </div>
            </div>

        </div>

    </div>

    <div class="modal-footer">

        <div class="form-group col-md-12" role="group">
            <button type="button"
                    focus-index="5"
                    ng-click="cancel()"
                    class="btn btn-danger pull-left">
                <span>خروج</span>
                <i class="fa fa-power-off  fa-lg"></i>
            </button>
            <button type="submit"
                    focus-index="2"
                    class="btn btn-success pull-right">
                <span>حفظ</span>
                <i class="fa fa-save fa-lg"></i>
            </button>
        </div>

    </div>

</form>